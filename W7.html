<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>FreePay TON Connect</title>
  <!-- âœ… Ù†Ø³Ø®Ù‡ Ø±Ø³Ù…ÛŒ TonConnect SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@tonconnect/sdk@2.2.0/dist/tonconnect-sdk.min.js"></script>
</head>
<body style="font-family: sans-serif; text-align:center; background:#0d1117; color:white; padding:30px;">
  <h2>ğŸ’ Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„ TON</h2>
  <button id="connectBtn" style="padding:10px 20px; border:none; border-radius:8px; background:#3b82f6; color:white;">Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ú©ÛŒÙ Ù¾ÙˆÙ„</button>
  
  <div id="walletInfo" style="display:none; margin-top:20px;">
    <p>âœ… Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…ØªØµÙ„ Ø´Ø¯</p>
    <p id="walletAddress"></p>

    <input id="amount" type="number" placeholder="Ù…Ù‚Ø¯Ø§Ø± TON" style="padding:5px; width:120px;">
    <button id="sendBtn" style="padding:10px 20px; border:none; border-radius:8px; background:#10b981; color:white;">Ø§Ø±Ø³Ø§Ù„ TON</button>
  </div>

  <script>
    alert("ğŸ“¦ Ø´Ø±ÙˆØ¹ ØªØ³Øª...");

    // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ SDK
    if (typeof TON_CONNECT_SDK === "undefined") {
      alert("âŒ TonConnect SDK Ù„ÙˆØ¯ Ù†Ø´Ø¯! Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†ØªØ±Ù†Øª ÛŒØ§ Ù„ÛŒÙ†Ú© jsDelivr");
    } else {
      alert("âœ… TonConnect SDK Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù„ÙˆØ¯ Ø´Ø¯!");

      const tonConnect = new TON_CONNECT_SDK.TonConnect({
        manifestUrl: "https://solider1385.github.io/Best-Coin.io/tonconnect-manifest.json"
      });

      const connectBtn = document.getElementById("connectBtn");
      const sendBtn = document.getElementById("sendBtn");
      const walletInfo = document.getElementById("walletInfo");
      const walletAddressEl = document.getElementById("walletAddress");

      connectBtn.onclick = async () => {
        alert("â³ Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...");
        try {
          await tonConnect.connectWallet();
          const wallet = tonConnect.wallet;
          alert("âœ… Ø§ØªØµØ§Ù„ Ù…ÙˆÙÙ‚!\nØ¢Ø¯Ø±Ø³: " + wallet.account.address);
          walletInfo.style.display = "block";
          walletAddressEl.textContent = "Ø¢Ø¯Ø±Ø³: " + wallet.account.address;
        } catch (err) {
          alert("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„: " + err.message);
        }
      };

      sendBtn.onclick = async () => {
        const amount = parseFloat(document.getElementById("amount").value);
        if (!amount || isNaN(amount)) {
          alert("âš ï¸ Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!");
          return;
        }

        const toAddress = "UQABfJXpm1D0Qm6pPutSjbEHVAWFzqvKv4BRSoFdA-5_En8Q";
        alert(`ğŸš€ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ ${amount} TON Ø¨Ù‡:\n${toAddress}`);

        try {
          await tonConnect.sendTransaction({
            validUntil: Math.floor(Date.now() / 1000) + 600,
            messages: [{
              address: toAddress,
              amount: (amount * 1e9).toString()
            }]
          });
          alert("âœ… ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!");
        } catch (err) {
          alert("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„: " + err.message);
        }
      };
    }
  </script>
</body>
</html>
