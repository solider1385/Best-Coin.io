<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>FreePay - TON Connect Test</title>
  <script src="https://ton.org/tonconnect/sdk@latest/tonconnect-sdk.min.js"></script>
</head>
<body style="font-family:sans-serif; text-align:center; padding:30px; background:#0d1117; color:white;">

  <h2>ğŸ’ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ú©ÛŒÙ Ù¾ÙˆÙ„ TON</h2>
  <button id="connectBtn" style="padding:10px 20px; border:none; border-radius:10px; background:#3b82f6; color:white;">Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„</button>

  <div id="walletInfo" style="margin-top:20px; display:none;">
    <p>Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…ØªØµÙ„ Ø´Ø¯ âœ…</p>
    <p id="walletAddress"></p>

    <input id="amount" type="number" placeholder="Ù…Ù‚Ø¯Ø§Ø± TON" style="margin:10px; padding:5px; width:120px;">
    <button id="sendBtn" style="padding:10px 20px; border:none; border-radius:10px; background:#10b981; color:white;">Ø§Ø±Ø³Ø§Ù„ TON</button>
  </div>

  <script>
    alert("âœ… ØµÙØ­Ù‡ Ù„ÙˆØ¯ Ø´Ø¯ØŒ Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ SDK...");

    // Ø¨Ø±Ø±Ø³ÛŒ Ù„ÙˆØ¯ Ø´Ø¯Ù† SDK
    if (typeof TON_CONNECT_SDK === "undefined") {
      alert("âŒ TonConnect SDK Ù„ÙˆØ¯ Ù†Ø´Ø¯!");
    } else {
      alert("âœ… TonConnect SDK Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù„ÙˆØ¯ Ø´Ø¯!");

      const tonConnect = new TON_CONNECT_SDK.TonConnect({
        manifestUrl: "https://solider1385.github.io/Best-Coin.io/tonconnect-manifest.json"
      });

      const connectBtn = document.getElementById("connectBtn");
      const sendBtn = document.getElementById("sendBtn");
      const walletInfo = document.getElementById("walletInfo");
      const walletAddressEl = document.getElementById("walletAddress");

      connectBtn.onclick = async () => {
        try {
          alert("ğŸ“¡ Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ú©ÛŒÙ Ù¾ÙˆÙ„...");
          await tonConnect.connectWallet();
          const wallet = tonConnect.wallet;
          alert("âœ… Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…ØªØµÙ„ Ø´Ø¯: " + wallet.account.address);
          walletInfo.style.display = "block";
          walletAddressEl.textContent = "Ø¢Ø¯Ø±Ø³: " + wallet.account.address;
        } catch (err) {
          alert("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„: " + err.message);
        }
      };

      sendBtn.onclick = async () => {
        const amount = document.getElementById("amount").value;
        if (!amount || isNaN(amount)) {
          alert("âš ï¸ Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!");
          return;
        }

        const toAddress = "UQABfJXpm1D0Qm6pPutSjbEHVAWFzqvKv4BRSoFdA-5_En8Q";
        alert(`ğŸš€ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø±Ø³Ø§Ù„ ${amount} TON Ø¨Ù‡:\n${toAddress}`);

        try {
          await tonConnect.sendTransaction({
            validUntil: Math.floor(Date.now() / 1000) + 600,
            messages: [{
              address: toAddress,
              amount: (amount * 1e9).toString()
            }]
          });
          alert("âœ… ØªØ±Ø§Ú©Ù†Ø´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!");
        } catch (err) {
          alert("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„: " + err.message);
        }
      };
    }
  </script>
</body>
</html>
